!function (e, t) { if ("object" == typeof exports && "object" == typeof module) module.exports = t(); else if ("function" == typeof define && define.amd) define([], t); else { var s = t(); for (var i in s) ("object" == typeof exports ? exports : e)[i] = s[i] } }(self, (() => (() => { "use strict"; var e = { d: (t, s) => { for (var i in s) e.o(s, i) && !e.o(t, i) && Object.defineProperty(t, i, { enumerable: !0, get: s[i] }) }, o: (e, t) => Object.prototype.hasOwnProperty.call(e, t), r: e => { "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(e, "__esModule", { value: !0 }) } }, t = {}; e.r(t), e.d(t, { Accessibility: () => r }); class s{ constructor() { this.body = document.body || document.querySelector("body"), this.deployedMap = new Map } isIOS() { return "boolean" == typeof this._isIOS || (this._isIOS = (() => { var e = ["iPad Simulator", "iPhone Simulator", "iPod Simulator", "iPad", "iPhone", "iPod"]; if (navigator.platform) for (; e.length;)if (navigator.platform === e.pop()) return !0; return !1 })()), this._isIOS } jsonToHtml(e) { let t = document.createElement(e.type); for (let s in e.attrs) t.setAttribute(s, e.attrs[s]); for (let s in e.children) { let i = null; i = "#text" === e.children[s].type ? document.createTextNode(e.children[s].text) : this.jsonToHtml(e.children[s]), (i && i.tagName && "undefined" !== i.tagName.toLowerCase() || 3 === i.nodeType) && t.appendChild(i) } return t } injectStyle(e, t = {}) { let s = document.createElement("style"); return s.appendChild(document.createTextNode(e)), t.className && s.classList.add(t.className), this.body.appendChild(s), s } getFormattedDim(e) { if (!e) return null; let t = function (e, t) { return { size: e.substring(0, e.indexOf(t)), suffix: t } }; return (e = String(e)).indexOf("%") > -1 ? t(e, "%") : e.indexOf("px") > -1 ? t(e, "px") : e.indexOf("em") > -1 ? t(e, "em") : e.indexOf("rem") > -1 ? t(e, "rem") : e.indexOf("pt") > -1 ? t(e, "pt") : "auto" === e ? t(e, "") : void 0 } extend(e, t) { for (let s in e) "object" == typeof e[s] ? t && t[s] && (t[s] instanceof Array ? e[s] = t[s] : e[s] = this.extend(e[s], t[s])) : "object" == typeof t && void 0 !== t[s] && (e[s] = t[s]); return e } injectIconsFont(e, t) { if (e && e.length) { let s = document.getElementsByTagName("head")[0], i = 0, n = !1, o = e => { n = n || "" === e.type, --i || t(n) }; e.forEach((e => { let t = document.createElement("link"); t.type = "text/css", t.rel = "stylesheet", t.href = e, t.className = "_access-font-icon-" + i++, t.onload = o, t.onerror = o, this.deployedObjects.set("." + t.className, !0), s.appendChild(t) })) } } getFixedFont(e) { return this.isIOS() ? e.replaceAll(" ", "+") : e } getFixedPseudoFont(e) { return this.isIOS() ? e.replaceAll("+", " ") : e } isFontLoaded(e, t) { try { const s = () => t(document.fonts.check(`1em ${e.replaceAll("+", " ")}`)); document.fonts.ready.then((() => { s() }), (() => { s() })) } catch (e) { return t(!0) } } warn(e) { let t = "Accessibility: "; console.warn ? console.warn(t + e) : console.log(t + e) } get deployedObjects() { return { get: e => this.deployedMap.get(e), contains: e => this.deployedMap.has(e), set: (e, t) => { this.deployedMap.set(e, t) }, remove: e => { this.deployedMap.delete(e) }, getAll: () => this.deployedMap } } createScreenshot(e) { return new Promise(((t, i) => { this._canvas || (this._canvas = document.createElement("canvas")); const n = new Image; this._canvas.style.position = "fixed", this._canvas.style.top = "0", this._canvas.style.left = "0", this._canvas.style.opacity = "0.05", this._canvas.style.transform = "scale(0.05)", n.crossOrigin = "anonymous", n.onload = () => { return e = this, i = void 0, a = function* () { document.body.appendChild(this._canvas); const e = this._canvas.getContext("2d"); this._canvas.width = n.naturalWidth, this._canvas.height = n.naturalHeight, e.clearRect(0, 0, this._canvas.width, this._canvas.height), e.drawImage(n, 0, 0); let i = s.DEFAULT_PIXEL; try { i = this._canvas.toDataURL("image/png") } catch (e) { } t(i), this._canvas.remove() }, new ((o = void 0) || (o = Promise))((function (t, s) { function n(e) { try { r(a.next(e)) } catch (e) { s(e) } } function c(e) { try { r(a.throw(e)) } catch (e) { s(e) } } function r(e) { e.done ? t(e.value) : new o((function (t) { t(e.value) })).then(n, c) } r((a = a.apply(e, i || [])).next()) })); var e, i, o, a }, n.onerror = () => { t(s.DEFAULT_PIXEL) }, n.src = e })) } getFileExtension(e) { return e.substring(e.lastIndexOf(".") + 1, e.length) || e } } s.DEFAULT_PIXEL = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAA1JREFUGFdj+P///38ACfsD/QVDRcoAAAAASUVORK5CYII="; var i = function (e, t, s, i) { return new (s || (s = Promise))((function (n, o) { function a(e) { try { r(i.next(e)) } catch (e) { o(e) } } function c(e) { try { r(i.throw(e)) } catch (e) { o(e) } } function r(e) { e.done ? n(e.value) : new s((function (t) { t(e.value) })).then(a, c) } r((i = i.apply(e, t || [])).next()) })) }; class n{ constructor(e) { this._acc = e, this.readBind = this._acc.read.bind(this._acc) } increaseText() { this._acc.alterTextSize(!0) } decreaseText() { this._acc.alterTextSize(!1) } increaseTextSpacing() { this._acc.alterTextSpace(!0) } decreaseTextSpacing() { this._acc.alterTextSpace(!1) } invertColors(e) { if (void 0 === this._acc.stateValues.html.backgroundColor && (this._acc.stateValues.html.backgroundColor = getComputedStyle(this._acc.html).backgroundColor), void 0 === this._acc.stateValues.html.color && (this._acc.stateValues.html.color = getComputedStyle(this._acc.html).color), e) return this._acc.resetIfDefined(this._acc.stateValues.html.backgroundColor, this._acc.html.style, "backgroundColor"), this._acc.resetIfDefined(this._acc.stateValues.html.color, this._acc.html.style, "color"), document.querySelector('._access-menu [data-access-action="invertColors"]').classList.remove("active"), this._acc.stateValues.invertColors = !1, this._acc.sessionState.invertColors = this._acc.stateValues.invertColors, this._acc.onChange(!0), void (this._acc.html.style.filter = ""); this._acc.stateValues.invertColors && this._acc.stateValues.textToSpeech && this._acc.textToSpeech("Colors Set To Normal"), document.querySelector('._access-menu [data-access-action="invertColors"]').classList.toggle("active"), this._acc.stateValues.invertColors = !this._acc.stateValues.invertColors, this._acc.sessionState.invertColors = this._acc.stateValues.invertColors, this._acc.onChange(!0), this._acc.stateValues.invertColors ? (this._acc.stateValues.grayHues && this._acc.menuInterface.grayHues(!0), this._acc.html.style.filter = "invert(1)", this._acc.stateValues.textToSpeech && this._acc.textToSpeech("Colors Inverted")) : this._acc.html.style.filter = "" } grayHues(e) { if (void 0 === this._acc.stateValues.html.filter && (this._acc.stateValues.html.filter = getComputedStyle(this._acc.html).filter), void 0 === this._acc.stateValues.html.webkitFilter && (this._acc.stateValues.html.webkitFilter = getComputedStyle(this._acc.html).webkitFilter), void 0 === this._acc.stateValues.html.mozFilter && (this._acc.stateValues.html.mozFilter = getComputedStyle(this._acc.html).mozFilter), void 0 === this._acc.stateValues.html.msFilter && (this._acc.stateValues.html.msFilter = getComputedStyle(this._acc.html).msFilter), e) return document.querySelector('._access-menu [data-access-action="grayHues"]').classList.remove("active"), this._acc.stateValues.grayHues = !1, this._acc.sessionState.grayHues = this._acc.stateValues.grayHues, this._acc.onChange(!0), this._acc.resetIfDefined(this._acc.stateValues.html.filter, this._acc.html.style, "filter"), this._acc.resetIfDefined(this._acc.stateValues.html.webkitFilter, this._acc.html.style, "webkitFilter"), this._acc.resetIfDefined(this._acc.stateValues.html.mozFilter, this._acc.html.style, "mozFilter"), void this._acc.resetIfDefined(this._acc.stateValues.html.msFilter, this._acc.html.style, "msFilter"); let t; document.querySelector('._access-menu [data-access-action="grayHues"]').classList.toggle("active"), this._acc.stateValues.grayHues = !this._acc.stateValues.grayHues, this._acc.sessionState.grayHues = this._acc.stateValues.grayHues, this._acc.onChange(!0), this._acc.stateValues.textToSpeech && !this._acc.stateValues.grayHues && this._acc.textToSpeech("Gray Hues Disabled."), this._acc.stateValues.grayHues ? (t = "grayscale(1)", this._acc.stateValues.invertColors && this.invertColors(!0), this._acc.stateValues.textToSpeech && this._acc.textToSpeech("Gray Hues Enabled.")) : t = "", this._acc.html.style.webkitFilter = t, this._acc.html.style.mozFilter = t, this._acc.html.style.msFilter = t, this._acc.html.style.filter = t } underlineLinks(e) { let t = "_access-underline", s = () => { let e = document.querySelector("." + t); e && (e.parentElement.removeChild(e), this._acc.common.deployedObjects.remove("." + t)) }; if (e) return this._acc.stateValues.underlineLinks = !1, this._acc.sessionState.underlineLinks = this._acc.stateValues.underlineLinks, this._acc.onChange(!0), document.querySelector('._access-menu [data-access-action="underlineLinks"]').classList.remove("active"), s(); if (document.querySelector('._access-menu [data-access-action="underlineLinks"]').classList.toggle("active"), this._acc.stateValues.underlineLinks = !this._acc.stateValues.underlineLinks, this._acc.sessionState.underlineLinks = this._acc.stateValues.underlineLinks, this._acc.onChange(!0), this._acc.stateValues.underlineLinks) { let e = "\n            body a {\n                text-decoration: underline !important;\n            }\n        "; this._acc.common.injectStyle(e, { className: t }), this._acc.common.deployedObjects.set("." + t, !0), this._acc.stateValues.textToSpeech && this._acc.textToSpeech("Links UnderLined") } else this._acc.stateValues.textToSpeech && this._acc.textToSpeech("Links UnderLine Removed"), s() } bigCursor(e) { if (e) return this._acc.html.classList.remove("_access_cursor"), document.querySelector('._access-menu [data-access-action="bigCursor"]').classList.remove("active"), this._acc.stateValues.bigCursor = !1, this._acc.sessionState.bigCursor = !1, void this._acc.onChange(!0); document.querySelector('._access-menu [data-access-action="bigCursor"]').classList.toggle("active"), this._acc.stateValues.bigCursor = !this._acc.stateValues.bigCursor, this._acc.sessionState.bigCursor = this._acc.stateValues.bigCursor, this._acc.onChange(!0), this._acc.html.classList.toggle("_access_cursor"), this._acc.stateValues.textToSpeech && this._acc.stateValues.bigCursor && this._acc.textToSpeech("Big Cursor Enabled"), this._acc.stateValues.textToSpeech && !this._acc.stateValues.bigCursor && this._acc.textToSpeech("Big Cursor Disabled") } readingGuide(e) { if (e) return document.getElementById("access_read_guide_bar") && document.getElementById("access_read_guide_bar").remove(), document.querySelector('._access-menu [data-access-action="readingGuide"]').classList.remove("active"), this._acc.stateValues.readingGuide = !1, this._acc.sessionState.readingGuide = this._acc.stateValues.readingGuide, this._acc.onChange(!0), document.body.removeEventListener("touchmove", this._acc.updateReadGuide, !1), document.body.removeEventListener("mousemove", this._acc.updateReadGuide, !1), void (this._acc.stateValues.textToSpeech && this._acc.textToSpeech("Reading Guide Enabled")); if (document.querySelector('._access-menu [data-access-action="readingGuide"]').classList.toggle("active"), this._acc.stateValues.readingGuide = !this._acc.stateValues.readingGuide, this._acc.sessionState.readingGuide = this._acc.stateValues.readingGuide, this._acc.onChange(!0), this._acc.stateValues.readingGuide) { let e = document.createElement("div"); e.id = "access_read_guide_bar", e.classList.add("access_read_guide_bar"), document.body.append(e), document.body.addEventListener("touchmove", this._acc.updateReadGuide, !1), document.body.addEventListener("mousemove", this._acc.updateReadGuide, !1) } else void 0 !== document.getElementById("access_read_guide_bar") && document.getElementById("access_read_guide_bar").remove(), document.body.removeEventListener("touchmove", this._acc.updateReadGuide, !1), document.body.removeEventListener("mousemove", this._acc.updateReadGuide, !1), this._acc.stateValues.textToSpeech && this._acc.textToSpeech("Reading Guide Disabled") } textToSpeech(e) { const t = document.querySelector('._access-menu [data-access-action="textToSpeech"]'); if (!t) return; let s = document.getElementsByClassName("screen-reader-wrapper-step-1"), i = document.getElementsByClassName("screen-reader-wrapper-step-2"), n = document.getElementsByClassName("screen-reader-wrapper-step-3"); this._acc.onChange(!1); const o = "_access-text-to-speech"; let a = () => { let e = document.querySelector("." + o); e && (e.parentElement.removeChild(e), document.removeEventListener("click", this.readBind, !1), document.removeEventListener("keyup", this.readBind, !1), this._acc.common.deployedObjects.remove("." + o)), window.speechSynthesis && window.speechSynthesis.cancel(), this._acc.isReading = !1 }; if (e) return t.classList.remove("active"), s[0].style.background = "#ffffff", i[0].style.background = "#ffffff", n[0].style.background = "#ffffff", this._acc.stateValues.textToSpeech = !1, window.speechSynthesis.cancel(), a(); if (1 !== this._acc.stateValues.speechRate || t.classList.contains("active")) if (1 === this._acc.stateValues.speechRate && t.classList.contains("active")) this._acc.stateValues.speechRate = 1.5, this._acc.textToSpeech("Reading Pace - Fast"), s[0].style.background = "#ffffff"; else { if (1.5 !== this._acc.stateValues.speechRate || !t.classList.contains("active")) { this._acc.stateValues.speechRate = 1, this._acc.textToSpeech("Screen Reader - Disabled"), t.classList.remove("active"), n[0].style.background = "#ffffff"; let e = setInterval((() => { this._acc.isReading || (this._acc.stateValues.textToSpeech = !1, a(), clearTimeout(e)) }), 500); return } this._acc.stateValues.speechRate = .7, this._acc.textToSpeech("Reading Pace - Slow"), i[0].style.background = "#ffffff" } else this._acc.stateValues.textToSpeech = !0, this._acc.textToSpeech("Screen Reader enabled. Reading Pace - Normal"), t.classList.add("active"), s[0].style.background = "#000000", i[0].style.background = "#000000", n[0].style.background = "#000000"; t.classList.contains("active") && 1 === this._acc.stateValues.speechRate && (this._acc.common.injectStyle("\n            *:hover {\n                box-shadow: 2px 2px 2px rgba(180,180,180,0.7);\n            }\n        ", { className: o }), this._acc.common.deployedObjects.set("." + o, !0), document.addEventListener("click", this.readBind, !1), document.addEventListener("keyup", this.readBind, !1)) } speechToText(e) { const t = document.querySelector('._access-menu [data-access-action="speechToText"]'); if (!t) return; this._acc.onChange(!1); let s = "_access-speech-to-text", i = () => { this._acc.recognition && (this._acc.recognition.stop(), this._acc.body.classList.remove("_access-listening")); let e = document.querySelector("." + s); e && (e.parentElement.removeChild(e), this._acc.common.deployedObjects.remove("." + s)); let i = document.querySelectorAll("._access-mic"); for (let e = 0; e < i.length; e++)i[e].removeEventListener("focus", this._acc.listen.bind(this._acc), !1), i[e].classList.remove("_access-mic"); t.classList.remove("active") }; if (e) return this._acc.stateValues.speechToText = !1, i(); if (this._acc.stateValues.speechToText = !this._acc.stateValues.speechToText, this._acc.stateValues.speechToText) { let e = `\n                body:after {\n                    content: ${this._acc.options.icon.useEmojis ? '"🎤"' : '"mic"'};\n                    ${this._acc.options.icon.useEmojis ? "" : "font-family: '" + this._acc.options.icon.fontFamily + "';"}\n                    position: fixed;\n                    z-index: 1100;\n                    top: 1vw;\n                    right: 1vw;\n                    width: 36px;\n                    height: 36px;\n                    font-size: 30px;\n                    line-height: 36px;\n                    border-radius: 50%;\n                    background: rgba(255,255,255,0.7);\n                    display: flex;\n                    justify-content: center;\n                    aling-items: center;\n                }\n\n                body._access-listening:after {\n                    animation: _access-listening-animation 2s infinite ease;\n                }\n\n                @keyframes _access-listening-animation {\n                    0%  {background-color: transparent;}\n                    50%  {background-color: #EF9A9A;}\n                }\n            `; this._acc.common.injectStyle(e, { className: s }), this._acc.common.deployedObjects.set("." + s, !0); let i = document.querySelectorAll('input[type="text"], input[type="search"], textarea, [contenteditable]'); for (let e = 0; e < i.length; e++)i[e].addEventListener("blur", (() => { "object" == typeof this._acc.recognition && "function" == typeof this._acc.recognition.stop && this._acc.recognition.stop() }), !1), i[e].addEventListener("focus", this._acc.listen.bind(this._acc), !1), i[e].parentElement.classList.add("_access-mic"); t.classList.add("active") } else i() } disableAnimations(e) { const t = "_access-disable-animations", s = "data-autoplay-stopped", n = () => { document.querySelector('._access-menu [data-access-action="disableAnimations"]').classList.remove("active"), this._acc.stateValues.disableAnimations = !1; let e = document.querySelector("." + t); e && (e.parentElement.removeChild(e), this._acc.common.deployedObjects.remove("." + t)), document.querySelectorAll("[data-org-src]").forEach((e => i(this, void 0, void 0, (function* () { const t = e.src; e.setAttribute("src", e.getAttribute("data-org-src")), e.setAttribute("data-org-src", t) })))), document.querySelectorAll(`video[${s}]`).forEach((e => { e.setAttribute("autoplay", ""), e.removeAttribute(s), e.play() })) }; e ? n() : (this._acc.stateValues.disableAnimations = !this._acc.stateValues.disableAnimations, this._acc.stateValues.disableAnimations ? (document.querySelector('._access-menu [data-access-action="disableAnimations"]').classList.add("active"), this._acc.common.injectStyle("\n                body * {\n                    animation-duration: 0.0ms !important;\n                    transition-duration: 0.0ms !important;\n                }\n        ", { className: t }), this._acc.common.deployedObjects.set("." + t, !0), document.querySelectorAll("img").forEach((e => i(this, void 0, void 0, (function* () { let t = this._acc.common.getFileExtension(e.src); if (t && "gif" === t.toLowerCase()) { let t = e.getAttribute("data-org-src"); t || (t = yield this._acc.common.createScreenshot(e.src)), e.setAttribute("data-org-src", e.src), e.src = t } })))), document.querySelectorAll("video[autoplay]").forEach((e => { e.setAttribute(s, ""), e.removeAttribute("autoplay"), e.pause() }))) : n()) } iframeModals(e, t) { t || (e = !0); const s = () => { this._dialog && (this._dialog.classList.add("closing"), setTimeout((() => { this._dialog.classList.remove("closing"), this._dialog.close(), this._dialog.remove() }), 350), n()), t && t.classList.remove("active") }, i = () => { s() }, n = () => { this._dialog.querySelector("button").removeEventListener("click", i, !1), this._dialog.removeEventListener("close", i) }; e ? s() : (t.classList.add("active"), this._dialog || (this._dialog = document.createElement("dialog")), this._dialog.classList.add("_access"), this._dialog.innerHTML = "", this._dialog.appendChild(this._acc.common.jsonToHtml({ type: "div", children: [{ type: "div", children: [{ type: "button", attrs: { role: "button", class: this._acc.options.icon.useEmojis ? "" : "material-icons", style: "position: absolute;\n                                    top: 5px;\n                                    cursor: pointer;\n                                    font-size: 24px !important;\n                                    font-weight: bold;\n                                    background: transparent;\n                                    border: none;\n                                    left: 5px;\n                                    color: #d63c3c;\n                                    padding: 0;" }, children: [{ type: "#text", text: this._acc.options.icon.useEmojis ? "X" : "close" }] }] }, { type: "div", children: [{ type: "iframe", attrs: { src: t.getAttribute("data-access-url"), style: "width: 50vw;height: 50vh;padding: 30px;" } }] }] })), document.body.appendChild(this._dialog), this._dialog.querySelector("button").addEventListener("click", i, !1), this._dialog.addEventListener("close", i), this._dialog.showModal()) } customFunctions(e, t) { if (!t) return; const s = this._acc.options.customFunctions[parseInt(t.getAttribute("data-access-custom-index"))]; s.toggle && t.classList.contains("active") && (e = !0), e ? (s.toggle && t.classList.remove("active"), s.method(s, !1)) : (s.toggle && t.classList.add("active"), s.method(s, !0)) } increaseLineHeight() { this._acc.alterLineHeight(!0) } decreaseLineHeight() { this._acc.alterLineHeight(!1) } } class o{ constructor() { } has(e) { return window.localStorage.hasOwnProperty(e) } set(e, t) { window.localStorage.setItem(e, JSON.stringify(t)) } get(e) { let t = window.localStorage.getItem(e); try { return JSON.parse(t) } catch (e) { return t } } clear() { window.localStorage.clear() } remove(e) { window.localStorage.removeItem(e) } isSupported() { let e = "_test"; try { return localStorage.setItem(e, e), localStorage.removeItem(e), !0 } catch (e) { return !1 } } } var a = function (e, t, s, i) { return new (s || (s = Promise))((function (n, o) { function a(e) { try { r(i.next(e)) } catch (e) { o(e) } } function c(e) { try { r(i.throw(e)) } catch (e) { o(e) } } function r(e) { e.done ? n(e.value) : new s((function (t) { t(e.value) })).then(a, c) } r((i = i.apply(e, t || [])).next()) })) }; class c{ constructor(e = {}) { this._common = new s, this._storage = new o, this._options = this.defaultOptions, e = this.deleteOppositesIfDefined(e), this.options = this._common.extend(this._options, e), this.disabledUnsupportedFeatures(), this._sessionState = { textSize: 0, textSpace: 0, lineHeight: 0, invertColors: !1, grayHues: !1, underlineLinks: !1, bigCursor: !1, readingGuide: !1 }, this.options.icon.useEmojis ? (this.fontFallback(), this.build()) : this._common.injectIconsFont(this.options.icon.fontFaceSrc, (e => { this.build(), this.options.icon.forceFont || setTimeout((() => { this._common.isFontLoaded(this.options.icon.fontFamily, (t => { t && !e || (this._common.warn(`${this.options.icon.fontFamily} font was not loaded, using emojis instead`), this.fontFallback(), this.destroy(), this.build()) })) })) })), this.options.modules.speechToText && window.addEventListener("beforeunload", (() => { this._isReading && (window.speechSynthesis.cancel(), this._isReading = !1) })) } get stateValues() { return this._stateValues } set stateValues(e) { this._stateValues = e } get html() { return this._html } get body() { return this._body } get sessionState() { return this._sessionState } set sessionState(e) { this._sessionState = e } get common() { return this._common } get recognition() { return this._recognition } get isReading() { return this._isReading } set isReading(e) { this._isReading = e } get defaultOptions() { return { icon: { position: { bottom: { size: 50, units: "px" }, right: { size: 10, units: "px" }, type: "fixed" }, dimensions: { width: { size: 50, units: "px" }, height: { size: 50, units: "px" } }, zIndex: "9999", backgroundColor: "#4054b2", color: "#fff", img: "accessibility", circular: !1, circularBorder: !1, fontFaceSrc: ["https://fonts.googleapis.com/icon?family=Material+Icons"], fontFamily: this._common.getFixedFont("Material Icons"), fontClass: "material-icons", useEmojis: !1 }, hotkeys: { enabled: !1, helpTitles: !0, keys: { toggleMenu: ["ctrlKey", "altKey", 65], invertColors: ["ctrlKey", "altKey", 73], grayHues: ["ctrlKey", "altKey", 71], underlineLinks: ["ctrlKey", "altKey", 85], bigCursor: ["ctrlKey", "altKey", 67], readingGuide: ["ctrlKey", "altKey", 82], textToSpeech: ["ctrlKey", "altKey", 84], speechToText: ["ctrlKey", "altKey", 83], disableAnimations: ["ctrlKey", "altKey", 81] } }, buttons: { font: { size: 18, units: "px" } }, guide: { cBorder: "#20ff69", cBackground: "#000000", height: "12px" }, menu: { dimensions: { width: { size: 25, units: "vw" }, height: { size: "auto", units: "" } }, fontFamily: "RobotoDraft, Roboto, sans-serif, Arial" }, labels: { resetTitle: "Reset", closeTitle: "Close", menuTitle: "Accessibility Options", increaseText: "increase text size", decreaseText: "decrease text size", increaseTextSpacing: "increase text spacing", decreaseTextSpacing: "decrease text spacing", invertColors: "invert colors", grayHues: "gray hues", bigCursor: "big cursor", readingGuide: "reading guide", underlineLinks: "underline links", textToSpeech: "text to speech", speechToText: "speech to text", disableAnimations: "disable animations", increaseLineHeight: "increase line height", decreaseLineHeight: "decrease line height", screenReader: "screen reader" }, textPixelMode: !1, textEmlMode: !0, animations: { buttons: !0 }, modules: { increaseText: !0, decreaseText: !0, increaseTextSpacing: !0, decreaseTextSpacing: !0, invertColors: !0, grayHues: !0, bigCursor: !0, readingGuide: !0, underlineLinks: !0, textToSpeech: !0, speechToText: !0, disableAnimations: !0 }, session: { persistent: !0 }, iframeModals: [], customFunctions: [], statement: { url: "" }, feedback: { url: "" }, language: { textToSpeechLang: "", speechToTextLang: "" } } } initFontSize() { if (!this._htmlInitFS) { let e = this._common.getFormattedDim(getComputedStyle(this._html).fontSize), t = this._common.getFormattedDim(getComputedStyle(this._body).fontSize); this._html.style.fontSize = e.size / 16 * 100 + "%", this._htmlOrgFontSize = this._html.style.fontSize, this._body.style.fontSize = t.size / e.size + "em" } } fontFallback() { this.options.icon.useEmojis = !0, this.options.icon.fontFamily = null, this.options.icon.img = "♿", this.options.icon.fontClass = "" } deleteOppositesIfDefined(e) { return e.icon && e.icon.position && (e.icon.position.left && (delete this._options.icon.position.right, this._options.icon.position.left = e.icon.position.left), e.icon.position.top && (delete this._options.icon.position.bottom, this._options.icon.position.top = e.icon.position.top)), e } disabledUnsupportedFeatures() { "webkitSpeechRecognition" in window && "https:" === location.protocol || (this._common.warn("speech to text isn't supported in this browser or in http protocol (https required)"), this.options.modules.speechToText = !1); const e = window; e.SpeechSynthesisUtterance && e.speechSynthesis || (this._common.warn("text to speech isn't supported in this browser"), this.options.modules.textToSpeech = !1) } injectCss() { let e = `\n        ._access-scrollbar::-webkit-scrollbar-track, .mat-autocomplete-panel::-webkit-scrollbar-track, .mat-tab-body-content::-webkit-scrollbar-track, .mat-select-panel:not([class*='mat-elevation-z'])::-webkit-scrollbar-track, .mat-menu-panel::-webkit-scrollbar-track {\n            -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3);\n            background-color: #F5F5F5;\n        }\n        ._access-scrollbar::-webkit-scrollbar, .mat-autocomplete-panel::-webkit-scrollbar, .mat-tab-body-content::-webkit-scrollbar, .mat-select-panel:not([class*='mat-elevation-z'])::-webkit-scrollbar, .mat-menu-panel::-webkit-scrollbar {\n            width: 6px;\n            background-color: #F5F5F5;\n        }\n        ._access-scrollbar::-webkit-scrollbar-thumb, .mat-autocomplete-panel::-webkit-scrollbar-thumb, .mat-tab-body-content::-webkit-scrollbar-thumb, .mat-select-panel:not([class*='mat-elevation-z'])::-webkit-scrollbar-thumb, .mat-menu-panel::-webkit-scrollbar-thumb {\n            background-color: #999999;\n        }\n        ._access-icon {\n            position: ${this.options.icon.position.type};\n            background-repeat: no-repeat;\n            background-size: contain;\n            cursor: pointer;\n            opacity: 0;\n            transition-duration: .35s;\n            -moz-user-select: none;\n            -webkit-user-select: none;\n            -ms-user-select: none;\n            user-select: none;\n            ${this.options.icon.useEmojis ? "" : "box-shadow: 1px 1px 5px rgba(0,0,0,.5);"}\n            transform: ${this.options.icon.useEmojis ? "skewX(14deg)" : "scale(1)"};\n        }\n        ._access-icon:hover {\n            ` + (this.options.animations.buttons && !this.options.icon.useEmojis ? "\n            box-shadow: 1px 1px 10px rgba(0,0,0,.9);\n            transform: scale(1.1);\n            " : "") + "\n        }\n        .circular._access-icon {\n            border-radius: 50%;\n            border: .5px solid white;\n        }\n        " + (this.options.animations.buttons && this.options.icon.circularBorder ? "\n        .circular._access-icon:hover {\n            border: 5px solid white;\n            border-style: double;\n            font-size: 35px!important;\n            vertical-align: middle;\n            padding-top: 2px;\n            text-align: center;\n        }\n        " : "") + `\n        .access_read_guide_bar{\n            box-sizing: border-box;\n            background: ${this.options.guide.cBackground};\n            width: 100%!important;\n            min-width: 100%!important;\n            position: fixed!important;\n            height: ${this.options.guide.height} !important;\n            border: solid 3px ${this.options.guide.cBorder};\n            border-radius: 5px;\n            top: 15px;\n            z-index: 2147483647;\n        }\n        .access-high-contrast *{\n            background-color: #000 !important;\n            background-image: none !important;\n            border-color: #fff !important;\n            -webkit-box-shadow: none !important;\n            box-shadow: none !important;\n            color: #fff !important;\n            text-indent: 0 !important;\n            text-shadow: none !important;\n        }\n        ._access-menu {\n            -moz-user-select: none;\n            -webkit-user-select: none;\n            -ms-user-select: none;\n            user-select: none;\n            position: fixed;\n            width: ${this.options.menu.dimensions.width.size + this.options.menu.dimensions.width.units};\n            height: ${this.options.menu.dimensions.height.size + this.options.menu.dimensions.height.units};\n            transition-duration: .35s;\n            z-index: ${this.options.icon.zIndex + 1};\n            opacity: 1;\n            background-color: #fff;\n            color: #000;\n            border-radius: 3px;\n            border: solid 1px #f1f0f1;\n            font-family: ${this.options.menu.fontFamily};\n            min-width: 300px;\n            box-shadow: 0px 0px 1px #aaa;\n            max-height: calc(100vh - 80px);\n            ${"rtl" === getComputedStyle(this._body).direction ? "text-indent: -5px" : ""}\n        }\n        ._access-menu.close {\n            z-index: -1;\n            width: 0;\n            opacity: 0;\n            background-color: transparent;\n        }\n        ._access-menu.bottom {\n            bottom: 0;\n        }\n        ._access-menu.top {\n            top: 0;\n        }\n        ._access-menu.left {\n            left: 0;\n        }\n        ._access-menu.close.left {\n            left: -${this.options.menu.dimensions.width.size + this.options.menu.dimensions.width.units};\n        }\n        ._access-menu.right {\n            right: 0;\n        }\n        ._access-menu.close.right {\n            right: -${this.options.menu.dimensions.width.size + this.options.menu.dimensions.width.units};\n        }\n        ._access-menu ._text-center {\n            font-size: 22px !important;\n            font-weight: bold;\n            margin-top: 20px;\n            margin-bottom: 10px;\n            padding: 0;\n            color: rgba(0,0,0,.87);\n            letter-spacing: initial!important;\n            word-spacing: initial!important;\n            text-align: center;\n        }\n        ._access-menu ._menu-close-btn {\n            left: 5px;\n            color: #d63c3c;\n            transition: .3s ease;\n            transform: rotate(0deg);\n            font-style: normal !important;\n        }\n        ._access-menu ._menu-reset-btn:hover,._access-menu ._menu-close-btn:hover {\n            ${this.options.animations.buttons ? "transform: rotate(180deg);" : ""}\n        }\n        ._access-menu ._menu-reset-btn {\n            right: 5px;\n            color: #4054b2;\n            transition: .3s ease;\n            transform: rotate(0deg);\n            font-style: normal !important;\n        }\n        ._access-menu ._menu-btn {\n            position: absolute;\n            top: 5px;\n            cursor: pointer;\n            font-size: 24px !important;\n            font-weight: bold;\n            background: transparent;\n            border: none;\n        }\n        ._access-menu ul {\n            padding: 0;\n            position: relative;\n            font-size: 18px !important;\n            margin: 0;\n            overflow: auto;\n            max-height: calc(100vh - 77px);\n        }\n        html._access_cursor * {\n            cursor: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSIyOS4xODhweCIgaGVpZ2h0PSI0My42MjVweCIgdmlld0JveD0iMCAwIDI5LjE4OCA0My42MjUiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDI5LjE4OCA0My42MjUiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnPjxwb2x5Z29uIGZpbGw9IiNGRkZGRkYiIHN0cm9rZT0iI0Q5REFEOSIgc3Ryb2tlLXdpZHRoPSIxLjE0MDYiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRzPSIyLjgsNC41NDkgMjYuODQ3LDE5LjkwMiAxNi45NjQsMjIuNzAxIDI0LjIzOSwzNy43NDkgMTguMjc4LDQyLjAxNyA5Ljc0MSwzMC43MjQgMS4xMzgsMzUuODA5ICIvPjxnPjxnPjxnPjxwYXRoIGZpbGw9IiMyMTI2MjciIGQ9Ik0yOS4xNzUsMjEuMTU1YzAuMDcxLTAuNjEzLTAuMTY1LTEuMjUzLTAuNjM1LTEuNTczTDIuMTY1LDAuMjU4Yy0wLjQyNC0wLjMyLTAuOTg4LTAuMzQ2LTEuNDM1LTAuMDUzQzAuMjgyLDAuNDk3LDAsMS4wMywwLDEuNjE3djM0LjE3MWMwLDAuNjEzLDAuMzA2LDEuMTQ2LDAuNzc2LDEuNDM5YzAuNDcxLDAuMjY3LDEuMDU5LDAuMjEzLDEuNDgyLTAuMTZsNy40ODItNi4zNDRsNi44NDcsMTIuMTU1YzAuMjU5LDAuNDgsMC43MjksMC43NDYsMS4yLDAuNzQ2YzAuMjM1LDAsMC40OTQtMC4wOCwwLjcwNi0wLjIxM2w2Ljk4OC00LjU4NWMwLjMyOS0wLjIxMywwLjU2NS0wLjU4NiwwLjY1OS0xLjAxM2MwLjA5NC0wLjQyNiwwLjAyNC0wLjg4LTAuMTg4LTEuMjI2bC02LjM3Ni0xMS4zODJsOC42MTEtMi43NDVDMjguNzA1LDIyLjI3NCwyOS4xMDUsMjEuNzY4LDI5LjE3NSwyMS4xNTV6IE0xNi45NjQsMjIuNzAxYy0wLjQyNCwwLjEzMy0wLjc3NiwwLjUwNi0wLjk0MSwwLjk2Yy0wLjE2NSwwLjQ4LTAuMTE4LDEuMDEzLDAuMTE4LDEuNDM5bDYuNTg4LDExLjc4MWwtNC41NDEsMi45ODVsLTYuODk0LTEyLjMxNWMtMC4yMTItMC4zNzMtMC41NDEtMC42NC0wLjk0MS0wLjcyYy0wLjA5NC0wLjAyNy0wLjE2NS0wLjAyNy0wLjI1OS0wLjAyN2MtMC4zMDYsMC0wLjU4OCwwLjEwNy0wLjg0NywwLjMyTDIuOCwzMi41OVY0LjU0OWwyMS41OTksMTUuODA2TDE2Ljk2NCwyMi43MDF6Ii8+PC9nPjwvZz48L2c+PC9nPjwvc3ZnPg==),auto!important;\n        }\n        .texting {\n            height:50px;\n            text-align: center;\n            border: solid 2.4px #f1f0f1;\n            border-radius: 4px;\n            width: 100%;\n            display: inline-block;\n        }\n        .screen-reader-wrapper {\n            margin-top: 13px;\n            margin-left: 10px;\n            margin-right: 10px;\n        }\n        .screen-reader-wrapper-step-1 {\n            float: left;\n            background: white;\n            width: 33%;\n            height: 3px;\n            border-radius: 10px;\n        }\n        .screen-reader-wrapper-step-2 {\n            float: left;\n            background: white;\n            width: 33%;\n            height: 3px;\n            border-radius: 10px;\n        }\n        .screen-reader-wrapper-step-3 {\n            float: left;\n            background: white;\n            width: 33%;\n            height: 3px;\n            border-radius: 10px;\n        }\n        ._access-menu ul li {\n            list-style-type: none;\n            -ms-user-select: none;\n            -moz-user-select: none;\n            -webkit-user-select: none;\n            user-select: none;\n            margin: 5px;\n            font-size: ${this.options.buttons.font.size + this.options.buttons.font.units} !important;\n            line-height: ${this.options.buttons.font.size + this.options.buttons.font.units} !important;\n            color: rgba(0,0,0,.6);\n            letter-spacing: initial!important;\n            word-spacing: initial!important;\n        }\n        ._access-menu ul li button {\n            background: #f9f9f9;\n            padding: 10px 0;\n            width: 100%;\n            text-indent: 35px;\n            text-align: start;\n            position: relative;\n            transition-duration: .35s;\n            transition-timing-function: ease-in-out;\n            border: solid 1px #f1f0f1;\n            border-radius: 4px;\n            cursor: pointer;\n        }\n        ._access-menu ul li.position {\n            display: inline-block;\n            width: auto;\n        }\n        ._access-menu ul.before-collapse li button {\n            opacity: 0.05;\n        }\n        ._access-menu ul li button.active, ._access-menu ul li button.active:hover {\n            background-color: #000;\n        }\n        ._access-menu div.active {\n            color: #fff;\n            background-color: #000;\n        }\n        ._access-menu ul li button.active, ._access-menu ul li button.active:hover, ._access-menu ul li button.active:before, ._access-menu ul li button.active:hover:before {\n            color: #fff;\n        }\n        ._access-menu ul li button:hover {\n            color: rgba(0,0,0,.8);\n            background-color: #eaeaea;\n        }\n        ._access-menu ul li.not-supported {\n            display: none;\n        }\n        ._access-menu ul li button:before {\n            content: ' ';\n            ${this.options.icon.useEmojis ? "" : "font-family: " + this._common.getFixedPseudoFont(this.options.icon.fontFamily) + ";"}\n            text-rendering: optimizeLegibility;\n            font-feature-settings: "liga" 1;\n            font-style: normal;\n            text-transform: none;\n            line-height: ${this.options.icon.useEmojis ? "1.1" : "1"};\n            font-size: ${this.options.icon.useEmojis ? "20px" : "24px"} !important;\n            width: 30px;\n            height: 30px;\n            display: inline-block;\n            overflow: hidden;\n            -webkit-font-smoothing: antialiased;\n            top: 7px;\n            left: 5px;\n            position: absolute;\n            color: rgba(0,0,0,.6);\n            direction: ltr;\n            text-indent: 0;\n            transition-duration: .35s;\n            transition-timing-function: ease-in-out;\n        }\n        @keyframes _access-dialog-backdrop {\n            0% {\n                background: rgba(0, 0, 0, 0.1);\n            }\n            100% {\n                background: rgba(0, 0, 0, 0.5);\n            }\n        }\n        dialog._access::backdrop, dialog._access {\n            transition-duration: 0.35s;\n            transition-timing-function: ease-in-out;\n        }\n        dialog._access:modal {\n            border-color: transparent;\n            border-width: 0;\n            padding: 0;\n        }\n        dialog._access[open]::backdrop {\n            background: rgba(0, 0, 0, 0.5);\n            animation: _access-dialog-backdrop 0.35s ease-in-out;\n        }\n        dialog._access.closing[open]::backdrop {\n            background: rgba(0, 0, 0, 0.1);\n        }\n        dialog._access.closing[open] {\n            opacity: 0;\n        }\n        ._access-menu ul li button svg path {\n            fill: rgba(0,0,0,.6);\n            transition-duration: .35s;\n            transition-timing-function: ease-in-out;\n        }\n        ._access-menu ul li button:hover svg path {\n            fill: rgba(0,0,0,.8);\n        }\n        ._access-menu ul li button.active svg path {\n            fill: #fff;\n        }\n        ._access-menu ul li:hover button:before {\n            color: rgba(0,0,0,.8);\n        }\n        ._access-menu ul li button.active button:before {\n            color: #fff;\n        }\n        ._access-menu ul li button[data-access-action="increaseText"]:before {\n            content: ${this.options.icon.useEmojis ? '"🔼"' : '"zoom_in"'};\n        }\n        ._access-menu ul li button[data-access-action="decreaseText"]:before {\n            content: ${this.options.icon.useEmojis ? '"🔽"' : '"zoom_out"'};\n        }\n        ._access-menu ul li button[data-access-action="increaseTextSpacing"]:before {\n            content: ${this.options.icon.useEmojis ? '"🔼"' : '"unfold_more"'};\n            transform: rotate(90deg) translate(-7px, 2px);\n            top: 14px;\n            left: 0;\n        }\n        ._access-menu ul li button[data-access-action="decreaseTextSpacing"]:before {\n            content: ${this.options.icon.useEmojis ? '"🔽"' : '"unfold_less"'};\n            transform: rotate(90deg) translate(-7px, 2px);\n            top: 14px;\n            left: 0;\n        }\n        ._access-menu ul li button[data-access-action="invertColors"]:before {\n            content: ${this.options.icon.useEmojis ? '"🎆"' : '"invert_colors"'};\n        }\n        ._access-menu ul li button[data-access-action="grayHues"]:before {\n            content: ${this.options.icon.useEmojis ? '"🌫️"' : '"format_color_reset"'};\n        }\n        ._access-menu ul li button[data-access-action="underlineLinks"]:before {\n            content: ${this.options.icon.useEmojis ? '"🔗"' : '"format_underlined"'};\n        }\n        ._access-menu ul li button[data-access-action="bigCursor"]:before {\n            /*content: 'touch_app';*/\n        }\n        ._access-menu ul li button[data-access-action="readingGuide"]:before {\n            content: ${this.options.icon.useEmojis ? '"↔️"' : '"border_horizontal"'};\n        }\n        ._access-menu ul li button[data-access-action="textToSpeech"]:before {\n            content: ${this.options.icon.useEmojis ? '"⏺️"' : '"record_voice_over"'};\n        }\n        ._access-menu ul li button[data-access-action="speechToText"]:before {\n            content: ${this.options.icon.useEmojis ? '"🎤"' : '"mic"'};\n        }\n        ._access-menu ul li button[data-access-action="disableAnimations"]:before {\n            content: ${this.options.icon.useEmojis ? '"🏃‍♂️"' : '"animation"'};\n        }\n        ._access-menu ul li button[data-access-action="iframeModals"]:before {\n            content: ${this.options.icon.useEmojis ? '"⚖️"' : '"policy"'};\n        }\n        ._access-menu ul li button[data-access-action="customFunctions"]:before {\n            content: ${this.options.icon.useEmojis ? '"❓"' : '"psychology_alt"'};\n        }\n        ._access-menu ul li button[data-access-action="increaseLineHeight"]:before {\n            content: ${this.options.icon.useEmojis ? '"🔼"' : '"unfold_more"'};\n        }\n        ._access-menu ul li button[data-access-action="decreaseLineHeight"]:before {\n            content: ${this.options.icon.useEmojis ? '"🔽"' : '"unfold_less"'};\n        }`, t = "_access-main-css"; this._common.injectStyle(e, { className: t }), this._common.deployedObjects.set("." + t, !1) } injectIcon() { let e = .8 * this.options.icon.dimensions.width.size, t = .9 * this.options.icon.dimensions.width.size, s = .1 * this.options.icon.dimensions.width.size, i = `width: ${this.options.icon.dimensions.width.size + this.options.icon.dimensions.width.units}\n            ;height: ${this.options.icon.dimensions.height.size + this.options.icon.dimensions.height.units}\n            ;font-size: ${e + this.options.icon.dimensions.width.units}\n            ;line-height: ${t + this.options.icon.dimensions.width.units}\n            ;text-indent: ${s + this.options.icon.dimensions.width.units}\n            ;background-color: ${this.options.icon.useEmojis ? "transparent" : this.options.icon.backgroundColor};color: ${this.options.icon.color}`; for (let e in this.options.icon.position) { let t = this.options.icon.position; t = t[e], i += ";" + e + ":" + t.size + t.units } i += `;z-index: ${this.options.icon.zIndex}`; let n = `_access-icon ${this.options.icon.fontClass} _access` + (this.options.icon.circular ? " circular" : ""), o = this._common.jsonToHtml({ type: "i", attrs: { class: n, style: i, title: this.options.labels.menuTitle, tabIndex: 0 }, children: [{ type: "#text", text: this.options.icon.img }] }); return this._body.appendChild(o), this._common.deployedObjects.set("._access-icon", !1), o } parseKeys(e) { return this.options.hotkeys.enabled && this.options.hotkeys.helpTitles ? "Hotkey: " + e.map((function (e) { return Number.isInteger(e) ? String.fromCharCode(e).toLowerCase() : e.replace("Key", "") })).join("+") : "" } injectMenu() { const e = { type: "div", attrs: { class: "_access-menu close _access" }, children: [{ type: "p", attrs: { class: "_text-center", role: "presentation" }, children: [{ type: "button", attrs: { class: `_menu-close-btn _menu-btn ${this.options.icon.fontClass}`, title: this.options.labels.closeTitle }, children: [{ type: "#text", text: this.options.icon.useEmojis ? "X" : "close" }] }, { type: "#text", text: this.options.labels.menuTitle }, { type: "button", attrs: { class: `_menu-reset-btn _menu-btn ${this.options.icon.fontClass}`, title: this.options.labels.resetTitle }, children: [{ type: "#text", text: this.options.icon.useEmojis ? "♲" : "refresh" }] }] }, { type: "ul", attrs: { class: this.options.animations.buttons ? "before-collapse _access-scrollbar" : "_access-scrollbar" }, children: [{ type: "li", children: [{ type: "button", attrs: { "data-access-action": "increaseText", tabIndex: "-1" }, children: [{ type: "#text", text: this.options.labels.increaseText }] }] }, { type: "li", children: [{ type: "button", attrs: { "data-access-action": "decreaseText", tabIndex: "-1" }, children: [{ type: "#text", text: this.options.labels.decreaseText }] }] }, { type: "li", children: [{ type: "button", attrs: { "data-access-action": "increaseTextSpacing", tabIndex: "-1" }, children: [{ type: "#text", text: this.options.labels.increaseTextSpacing }] }] }, { type: "li", children: [{ type: "button", attrs: { "data-access-action": "decreaseTextSpacing", tabIndex: "-1" }, children: [{ type: "#text", text: this.options.labels.decreaseTextSpacing }] }] }, { type: "li", children: [{ type: "button", attrs: { "data-access-action": "increaseLineHeight", tabIndex: "-1" }, children: [{ type: "#text", text: this.options.labels.increaseLineHeight }] }] }, { type: "li", children: [{ type: "button", attrs: { "data-access-action": "decreaseLineHeight", tabIndex: "-1" }, children: [{ type: "#text", text: this.options.labels.decreaseLineHeight }] }] }, { type: "li", children: [{ type: "button", attrs: { "data-access-action": "invertColors", title: this.parseKeys(this.options.hotkeys.keys.invertColors), tabIndex: "-1" }, children: [{ type: "#text", text: this.options.labels.invertColors }] }] }, { type: "li", children: [{ type: "button", attrs: { "data-access-action": "grayHues", title: this.parseKeys(this.options.hotkeys.keys.grayHues), tabIndex: "-1" }, children: [{ type: "#text", text: this.options.labels.grayHues }] }] }, { type: "li", children: [{ type: "button", attrs: { "data-access-action": "underlineLinks", title: this.parseKeys(this.options.hotkeys.keys.underlineLinks), tabIndex: "-1" }, children: [{ type: "#text", text: this.options.labels.underlineLinks }] }] }, { type: "li", children: [{ type: "button", attrs: { "data-access-action": "bigCursor", title: this.parseKeys(this.options.hotkeys.keys.bigCursor), tabIndex: "-1" }, children: [{ type: "div", attrs: { id: "iconBigCursor" } }, { type: "#text", text: this.options.labels.bigCursor }] }] }, { type: "li", children: [{ type: "button", attrs: { "data-access-action": "readingGuide", title: this.parseKeys(this.options.hotkeys.keys.readingGuide), tabIndex: "-1" }, children: [{ type: "#text", text: this.options.labels.readingGuide }] }] }, { type: "li", children: [{ type: "button", attrs: { "data-access-action": "disableAnimations" }, children: [{ type: "#text", text: this.options.labels.disableAnimations }] }] }] }] }; this.options.iframeModals && this.options.iframeModals.forEach(((t, s) => { const i = { type: "li", children: [{ type: "button", attrs: { "data-access-action": "iframeModals", "data-access-url": t.iframeUrl }, children: [{ type: "#text", text: t.buttonText }] }] }; let n = null; if (t.icon && !this.options.icon.useEmojis ? n = t.icon : t.emoji && this.options.icon.useEmojis && (n = t.emoji), n) { i.children[0].attrs["data-access-iframe-index"] = s; const e = `._access-menu ul li button[data-access-action="iframeModals"][data-access-iframe-index="${s}"]:before {\n                        content: "${n}";\n                    }`; let t = "_data-access-iframe-index-" + s; this._common.injectStyle(e, { className: t }), this._common.deployedObjects.set("." + t, !1) } this.options.modules.textToSpeech ? e.children[1].children.splice(e.children[1].children.length - 2, 0, i) : e.children[1].children.push(i) })), this.options.customFunctions && this.options.customFunctions.forEach(((t, s) => { const i = { type: "li", children: [{ type: "button", attrs: { "data-access-action": "customFunctions", "data-access-custom-id": t.id, "data-access-custom-index": s }, children: [{ type: "#text", text: t.buttonText }] }] }; let n = null; if (t.icon && !this.options.icon.useEmojis ? n = t.icon : t.emoji && this.options.icon.useEmojis && (n = t.emoji), n) { const e = `._access-menu ul li button[data-access-action="customFunctions"][data-access-custom-id="${t.id}"]:before {\n                        content: "${n}";\n                    }`; let s = "_data-access-custom-id-" + t.id; this._common.injectStyle(e, { className: s }), this._common.deployedObjects.set("." + s, !1) } this.options.modules.textToSpeech ? e.children[1].children.splice(e.children[1].children.length - 2, 0, i) : e.children[1].children.push(i) })); let t = this._common.jsonToHtml(e); for (let e in this.options.icon.position) t.classList.add(e); this._body.appendChild(t), setTimeout((function () { let e = document.getElementById("iconBigCursor"); e && (e.outerHTML = e.outerHTML + '<svg version="1.1" id="iconBigCursorSvg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" style="position: absolute;width: 19px;height: 19px;left: 17px;top: 9px; left: 9px;enable-background:new 0 0 512 512;" xml:space="preserve"><path d="M 423.547 323.115 l -320 -320 c -3.051 -3.051 -7.637 -3.947 -11.627 -2.304 s -6.592 5.547 -6.592 9.856 V 480 c 0 4.501 2.837 8.533 7.083 10.048 c 4.224 1.536 8.981 0.192 11.84 -3.285 l 85.205 -104.128 l 56.853 123.179 c 1.792 3.883 5.653 6.187 9.685 6.187 c 1.408 0 2.837 -0.277 4.203 -0.875 l 74.667 -32 c 2.645 -1.131 4.736 -3.285 5.76 -5.973 c 1.024 -2.688 0.939 -5.675 -0.277 -8.299 l -57.024 -123.52 h 132.672 c 4.309 0 8.213 -2.603 9.856 -6.592 C 427.515 330.752 426.598 326.187 423.547 323.115 Z"/></svg>', document.getElementById("iconBigCursor").remove()) }), 1), this._common.deployedObjects.set("._access-menu", !1); let s = document.querySelector("._access-menu ._menu-close-btn");["click", "keyup"].forEach((e => { s.addEventListener(e, (e => { let t = e || window.event; 0 === t.detail && "Enter" !== t.key || this.toggleMenu() }), !1) })); let i = document.querySelector("._access-menu ._menu-reset-btn"); return ["click", "keyup"].forEach((e => { i.addEventListener(e, (e => { let t = e || window.event; 0 === t.detail && "Enter" !== t.key || this.resetAll() }), !1) })), t } getVoices() { return new Promise((e => { let t, s = window.speechSynthesis; t = setInterval((() => { 0 !== s.getVoices().length && (e(s.getVoices()), clearInterval(t)) }), 10) })) } injectTts() { return a(this, void 0, void 0, (function* () { let e = yield this.getVoices(), t = !1; for (let s = 0; s < e.length; s++)if (e[s].lang === this.options.language.textToSpeechLang) { t = !0; break } if (t) { let e = this.common.jsonToHtml({ type: "li", children: [{ type: "button", attrs: { "data-access-action": "textToSpeech" }, children: [{ type: "#text", text: this.options.labels.textToSpeech }] }, { type: "div", attrs: { class: "screen-reader-wrapper" }, children: [{ type: "div", attrs: { class: "screen-reader-wrapper-step-1", tabIndex: "-1" } }, { type: "div", attrs: { class: "screen-reader-wrapper-step-2", tabIndex: "-1" } }, { type: "div", attrs: { class: "screen-reader-wrapper-step-3", tabIndex: "-1" } }] }] }), t = this.common.jsonToHtml({ type: "li", children: [{ type: "button", attrs: { "data-access-action": "speechToText" }, children: [{ type: "#text", text: this.options.labels.speechToText }] }] }), s = document.querySelector("._access-menu ul"); s.appendChild(t), s.appendChild(e) } })) } addListeners() { let e = document.querySelectorAll("._access-menu ul li"), t = document.getElementsByClassName("screen-reader-wrapper-step-1"), s = document.getElementsByClassName("screen-reader-wrapper-step-2"), i = document.getElementsByClassName("screen-reader-wrapper-step-3"); for (let t = 0; t < e.length; t++) ["click", "keyup"].forEach((s => e[t].addEventListener(s, (e => { let t = e || window.event; 0 === t.detail && "Enter" !== t.key || this.invoke(t.target.getAttribute("data-access-action"), t.target) }))));[...Array.from(t), ...Array.from(s), ...Array.from(i)].forEach((e => e.addEventListener("click", (e => { let t = e || window.event; this.invoke(t.target.parentElement.parentElement.getAttribute("data-access-action"), t.target) }), !1))) } disableUnsupportedModules() { for (let e in this.options.modules) { let t = this.options.modules; if (t = t[e], !t) { let t = document.querySelector('li[data-access-action="' + e + '"]'); t && t.classList.add("not-supported") } } } resetAll() { this.menuInterface.textToSpeech(!0), this.menuInterface.speechToText(!0), this.menuInterface.disableAnimations(!0), this.menuInterface.underlineLinks(!0), this.menuInterface.grayHues(!0), this.menuInterface.invertColors(!0), this.menuInterface.bigCursor(!0), this.menuInterface.readingGuide(!0), this.resetTextSize(), this.resetTextSpace(), this.resetLineHeight() } resetTextSize() { this.resetIfDefined(this._stateValues.body.fontSize, this._body.style, "fontSize"), void 0 !== this._htmlOrgFontSize && (this._html.style.fontSize = this._htmlOrgFontSize); let e = document.querySelectorAll("[data-init-font-size]"); for (let t = 0; t < e.length; t++)e[t].style.fontSize = e[t].getAttribute("data-init-font-size"), e[t].removeAttribute("data-init-font-size"); this._sessionState.textSize = 0, this.onChange(!0) } resetLineHeight() { this.resetIfDefined(this._stateValues.body.lineHeight, this.body.style, "lineHeight"); let e = document.querySelectorAll("[data-init-line-height]"); for (let t = 0; t < e.length; t++)e[t].style.lineHeight = e[t].getAttribute("data-init-line-height"), e[t].removeAttribute("data-init-line-height"); this.sessionState.lineHeight = 0, this.onChange(!0) } resetTextSpace() { this.resetIfDefined(this._stateValues.body.wordSpacing, this._body.style, "wordSpacing"), this.resetIfDefined(this._stateValues.body.letterSpacing, this._body.style, "letterSpacing"); let e = document.querySelectorAll("[data-init-word-spacing]"), t = document.querySelectorAll("[data-init-letter-spacing]"); for (let t = 0; t < e.length; t++)e[t].style.wordSpacing = e[t].getAttribute("data-init-word-spacing"), e[t].removeAttribute("data-init-word-spacing"); for (let s = 0; s < t.length; s++)e[s].style.letterSpacing = e[s].getAttribute("data-init-letter-spacing"), e[s].removeAttribute("data-init-letter-spacing"); this._sessionState.textSpace = 0, this.onChange(!0) } alterTextSize(e) { this._sessionState.textSize += e ? 1 : -1, this.onChange(!0); let t = 12.5; if (e || (t *= -1), this.options.textPixelMode) { let s = document.querySelectorAll("*:not(._access)"); for (let i = 0; i < s.length; i++){ let n = getComputedStyle(s[i]).fontSize; n && n.indexOf("px") > -1 && (s[i].getAttribute("data-init-font-size") || s[i].setAttribute("data-init-font-size", n), n = parseInt(n.replace("px", "")) + t, s[i].style.fontSize = n + "px"), this._stateValues.textToSpeech && this.textToSpeech("Text Size " + (e ? "Increased" : "Decreased")) } } else if (this.options.textEmlMode) { let s = this._html.style.fontSize; s.indexOf("%") ? (s = parseInt(s.replace("%", "")), this._html.style.fontSize = s + t + "%", this._stateValues.textToSpeech && this.textToSpeech("Text Size " + (e ? "Increased" : "Decreased"))) : this._common.warn("Accessibility.textEmlMode, html element is not set in %.") } else { let e = this._common.getFormattedDim(getComputedStyle(this._body).fontSize); void 0 === this._stateValues.body.fontSize && (this._stateValues.body.fontSize = e.size + e.suffix), e && e.suffix && !isNaN(1 * e.size) && (this._body.style.fontSize = 1 * e.size + t + e.suffix) } } alterLineHeight(e) { this.sessionState.lineHeight += e ? 1 : -1, this.onChange(!0); let t = 2; e || (t *= -1); let s = document.querySelectorAll("*:not(._access)"), i = Array.prototype.slice.call(document.querySelectorAll("._access-menu *")); for (let n = 0; n < s.length; n++)if (!i.includes(s[n])) if (this.options.textPixelMode) { let i = getComputedStyle(s[n]).lineHeight; if (i && i.indexOf("px") > -1) { s[n].getAttribute("data-init-line-height") || s[n].setAttribute("data-init-line-height", i); const e = parseInt(i.replace("px", "")) + t; s[n].style.lineHeight = `${e}px` } this._stateValues.textToSpeech && this.textToSpeech("Line Height " + (e ? "Increased" : "Decreased")) } else if (this.options.textEmlMode) { let i = getComputedStyle(s[n]).fontSize, o = getComputedStyle(s[n]).lineHeight, a = o.replace("px", ""), c = i.replace("px", ""), r = 100 * parseInt(a) / parseInt(c); o && o.indexOf("px") > -1 && (s[n].getAttribute("data-init-line-height") || s[n].setAttribute("data-init-line-height", r + "%"), r += t, s[n].style.lineHeight = r + "%"), this._stateValues.textToSpeech && this.textToSpeech("Line height " + (e ? "Increased" : "Decreased")) } } alterTextSpace(e) { this._sessionState.textSpace += e ? 1 : -1, this.onChange(!0); let t = 2; if (e || (t *= -1), this.options.textPixelMode) { let s = document.querySelectorAll("*:not(._access)"), i = Array.prototype.slice.call(document.querySelectorAll("._access-menu *")); for (let e = 0; e < s.length; e++){ if (i.includes(s[e])) continue; let n = s[e].style.wordSpacing; n && n.indexOf("px") > -1 ? (s[e].getAttribute("data-init-word-spacing") || s[e].setAttribute("data-init-word-spacing", n), n = 1 * n.replace("px", "") + t, s[e].style.wordSpacing = n + "px") : (s[e].setAttribute("data-init-word-spacing", n), s[e].style.wordSpacing = t + "px"); let o = s[e].style.letterSpacing; o && o.indexOf("px") > -1 ? (s[e].getAttribute("data-init-letter-spacing") || s[e].setAttribute("data-init-letter-spacing", o), o = 1 * o.replace("px", "") + t, s[e].style.letterSpacing = o + "px") : (s[e].setAttribute("data-init-letter-spacing", o), s[e].style.letterSpacing = t + "px") } this._stateValues.textToSpeech && this.textToSpeech("Text Spacing " + (e ? "Increased" : "Decreased")) } else { let s = this._common.getFormattedDim(getComputedStyle(this._body).wordSpacing); void 0 === this._stateValues.body.wordSpacing && (this._stateValues.body.wordSpacing = ""), s && s.suffix && !isNaN(1 * s.size) && (this._body.style.wordSpacing = 1 * s.size + t + s.suffix); let i = this._common.getFormattedDim(getComputedStyle(this._body).letterSpacing); void 0 === this._stateValues.body.letterSpacing && (this._stateValues.body.letterSpacing = ""), i && i.sufix && !isNaN(1 * i.size) && (this._body.style.letterSpacing = 1 * i.size + t + i.sufix), this._stateValues.textToSpeech && this.textToSpeech("Text Spacing " + (e ? "Increased" : "Decreased")) } } speechToText() { ("webkitSpeechRecognition" in window || "SpeechRecognition" in window) && (this._recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition), this._recognition.continuous = !0, this._recognition.interimResults = !0, this._recognition.onstart = () => { this._body.classList.add("_access-listening") }, this._recognition.onend = () => { this._body.classList.remove("_access-listening") }, this._recognition.onresult = e => { let t = ""; if (void 0 !== e.results) { for (let s = e.resultIndex; s < e.results.length; ++s)e.results[s].isFinal && (t += e.results[s][0].transcript); t && this._speechToTextTarget && (this._speechToTextTarget.parentElement.classList.remove("_access-listening"), "input" === this._speechToTextTarget.tagName.toLowerCase() || "textarea" === this._speechToTextTarget.tagName.toLowerCase() ? this._speechToTextTarget.value = t : null !== this._speechToTextTarget.getAttribute("contenteditable") && (this._speechToTextTarget.innerText = t)) } }, this._recognition.lang = this.options.language.speechToTextLang, this._recognition.start()) } textToSpeech(e) { const t = window; if (!t.SpeechSynthesisUtterance || !t.speechSynthesis) return; let s = new t.SpeechSynthesisUtterance(e); s.lang = this.options.language.textToSpeechLang, s.lang = this.options.textToSpeechLang, s.rate = this._stateValues.speechRate, s.onend = () => { this._isReading = !1 }; let i = t.speechSynthesis.getVoices(), n = !1; for (let e = 0; e < i.length; e++)if (i[e].lang === s.lang) { s.voice = i[e], n = !0; break } n || this._common.warn("text to speech language not supported!"), (window.speechSynthesis.pending || window.speechSynthesis.speaking) && (window.speechSynthesis.pause, window.speechSynthesis.cancel()), window.speechSynthesis.speak(s), this._isReading = !0 } createScreenShot(e) { return new Promise((t => { let i = document.createElement("canvas"), n = new Image; i.style.position = "fixed", i.style.top = "0", i.style.left = "0", i.style.opacity = "0", i.style.transform = "scale(0.05)", n.crossOrigin = "anonymous", n.onload = () => a(this, void 0, void 0, (function* () { document.body.appendChild(i); const e = i.getContext("2d"); let s; i.width = n.naturalWidth, i.height = n.naturalHeight, e.clearRect(0, 0, i.width, i.height), e.drawImage(n, 0, 0); try { s = i.toDataURL("image/png") } catch (e) { } t(s), i.remove() })), n.onerror = () => { t(s.DEFAULT_PIXEL) }, n.src = e })) } listen() { "object" == typeof this._recognition && "function" == typeof this._recognition.stop && this._recognition.stop(), this._speechToTextTarget = window.event.target, this.speechToText() } read(e) { try { (e = window.event || e || arguments[0]) && e.preventDefault && (e.preventDefault(), e.stopPropagation()) } catch (e) { } let t = Array.prototype.slice.call(document.querySelectorAll("._access-menu *")); for (const s in t) if (t[s] === window.event.target && e instanceof MouseEvent) return; e instanceof KeyboardEvent && (e.shiftKey && "Tab" === e.key || "Tab" === e.key) ? this.textToSpeech(window.event.target.innerText) : this._isReading ? (window.speechSynthesis.cancel(), this._isReading = !1) : this.textToSpeech(window.event.target.innerText) } runHotkey(e) { "toggleMenu" === e ? this.toggleMenu() : this.menuInterface.hasOwnProperty(e) && this._options.modules[e] && this.menuInterface[e](!1) } toggleMenu() { const e = this._menu.classList.contains("close"); this.options.animations && this.options.animations.buttons && setTimeout((() => { this._menu.querySelector("ul").classList.toggle("before-collapse") }), e ? 500 : 10), this._menu.classList.toggle("close"), this.options.icon.tabIndex = e ? 0 : -1, this._menu.childNodes.forEach((t => { t.tabIndex = 0, t.hasChildNodes() && (t.tabIndex = -1, t.childNodes.forEach((t => { t.tabIndex = e ? 0 : -1 }))) })) } invoke(e, t) { "function" == typeof this.menuInterface[e] && this.menuInterface[e](void 0, t) } build() { this._stateValues = { underlineLinks: !1, textToSpeech: !1, bigCursor: !1, readingGuide: !1, speechRate: 1, body: {}, html: {} }, this._body = document.body || document.getElementsByTagName("body")[0], this._html = document.documentElement || document.getElementsByTagName("html")[0], this.options.textEmlMode && this.initFontSize(), this.injectCss(), this._icon = this.injectIcon(), this._menu = this.injectMenu(), this.injectTts(), setTimeout((() => { this.addListeners(), this.disableUnsupportedModules() }), 10), this.options.hotkeys.enabled && (document.onkeydown = e => { let t = Object.entries(this.options.hotkeys.keys).find((function (t) { let s = !0; for (var i = 0; i < t[1].length; i++)Number.isInteger(t[1][i]) ? e.keyCode !== t[1][i] && (s = !1) : void 0 !== e[t[1][i]] && !1 !== e[t[1][i]] || (s = !1); return s })); void 0 !== t && this.runHotkey(t[0]) }), this._icon.addEventListener("click", (() => { this.toggleMenu() }), !1), this._icon.addEventListener("keyup", (e => { "Enter" === e.key && this.toggleMenu() }), !1), setTimeout((() => { this._icon.style.opacity = "1" }), 10), this.updateReadGuide = e => { let t = 0; t = "touchmove" === e.type ? e.changedTouches[0].clientY : e.y, document.getElementById("access_read_guide_bar").style.top = t - (parseInt(this.options.guide.height.replace("px", "")) + 5) + "px" }, this.menuInterface = new n(this), this.options.session.persistent && this.setSessionFromCache() } updateReadGuide(e) { let t = 0; t = "touchmove" === e.type ? e.changedTouches[0].clientY : e.y, document.getElementById("access_read_guide_bar").style.top = t - (parseInt(this.options.guide.height.replace("px", "")) + 5) + "px" } resetIfDefined(e, t, s) { void 0 !== e && (t[s] = e) } onChange(e) { e && this.options.session.persistent && this.saveSession() } saveSession() { this._storage.set("_accessState", this.sessionState) } setSessionFromCache() { let e = this._storage.get("_accessState"); if (e) { if (e.textSize) { let t = e.textSize; if (t > 0) for (; t--;)this.alterTextSize(!0); else for (; t++;)this.alterTextSize(!1) } if (e.textSpace) { let t = e.textSpace; if (t > 0) for (; t--;)this.alterTextSpace(!0); else for (; t++;)this.alterTextSpace(!1) } if (e.lineHeight) { let t = e.lineHeight; if (t > 0) for (; t--;)this.alterLineHeight(!0); else for (; t--;)this.alterLineHeight(!1) } e.invertColors && this.menuInterface.invertColors(), e.grayHues && this.menuInterface.grayHues(), e.underlineLinks && this.menuInterface.underlineLinks(), e.bigCursor && this.menuInterface.bigCursor(), e.readingGuide && this.menuInterface.readingGuide(), this.sessionState = e } } destroy() { this._common.deployedObjects.getAll().forEach(((e, t) => { const s = document.querySelector(t); s && s.parentElement.removeChild(s) })) } } c.init = e => { console.warn('"Accessibility.init()" is deprecated! Please use "new Accessibility()" instead'), new c(e) }; const r = c; return window && (window.Accessibility = r), t })()))
